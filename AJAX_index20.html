<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="crossorigin="anonymous"></script>	
	</head>
	<body>
		<button id="getRequest">Get request</button>
		<button id="postRequest">Post request</button>
		
		<hr>

		<p id="result"></p>
	</body>
</html>
<script>
class request{
	constructor(resultLabel){
		this.resultLabel = resultLabel;	
	}
	getRequest(requestPath, requestDataType){
		this.requestPath = requestPath;
		this.requestDataType = requestDataType;

		var self = this;
		$.ajax({
			url : self.requestPath,
			dataType : self.requestDataType,
			type : "GET"
		}).done((requestDataGet) => {
			switch(self.resultLabel){
				case "console":
					console.log(requestDataGet);
					break;
				case false:
				case undefined:
				case null:
					break;
				default:
					$(self.resultLabel).text(Object.entries(typeof requestDataGet === "object" ? requestDataGet : JSON.parse(requestDataGet).reduce((accumulator, KVP, KVP_INDEX, OriginalKVPEntries) => (accumulator += `${KVP[0]} : ${KVP[1]}\n`, accumulator) ,new String())))	
					break;	
			}
		})
	}
	postRequest(requestPath, requestHeaders, requestSendObject, requestDataType){
		this.requestPath = requestPath;
		this.requestHeaders = requestHeaders;
		this.requestSendObject = requestSendObject;
		this.requestDataType = requestDataType;

		var self = this;

		$.ajax({
			url : self.requestPath,
			headers : self.requestHeaders,
			data : self.requestSendObject,
			dataType : self.requestDataType,
			type : "POST"
		}).done((XHR_REQUEST_POST) => {
			switch(self.resultLabel){
				case "console":
					console.log("Request sent.");
					break;
				case false:
				case undefined:
				case null:
					break;
				default:
					$("p#result").text("Request sent.");
					break;
			}
		})
	}
}

let newPerson = {
	name : "David-Ioannis Gugea",
	age : 16
}

document.addEventListener(
	"DOMContentLoaded",
	(DOM_READY_EVENT) => {
		$("button#getRequest").click(function(event){
			let XHR_REQUEST_GET = new request("console");
			XHR_REQUEST_GET.getRequest("users.json", "json");
		})			
		$("button#postRequest").click(function(event){
			let XHR_REQUEST_POST = new request("console");
			XHR_REQUEST_POST.postRequest("users.json", {
				"Content-Type" : "application/json",
				"Accept" : "json"
			}, newPerson, "html")
		})
	},
	false // dispatch event in the bubbling phase not in the capturing phase
)
</script>
